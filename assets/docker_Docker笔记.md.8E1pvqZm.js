import{_ as s,o as a,c as n,Q as l}from"./chunks/framework.gI2xCOxE.js";const p="/assets/image-20230825200144469.BGPsLNkV.png",e="/assets/image-20230825201152933.-DaCN2_4.png",o="/assets/image-20231119175243848.rFwHGOVT.png",c="/assets/image-20230825211739925.QfhVcteu.png",r="/assets/image-20230825223114926.nbbVjF-E.png",t="/assets/image-20230825234452741.AHsgZkNz.png",i="/assets/image-20230825234848182.CRjNsFd7.png",d="/assets/image-20230825235720592.Hi_Oy1Qc.png",y="/assets/image-20230826001119375.Xr7XpD9O.png",E="/assets/image-20230826093349339.pU829_bC.png",u="data:image/png;base64,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",b="data:image/png;base64,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",F="/assets/image-20230827123655693.qLDf4K5B.png",h="/assets/image-20230827125024857.AdgFk5Sd.png",P=JSON.parse('{"title":"Docker","description":"","frontmatter":{},"headers":[],"relativePath":"docker/Docker笔记.md","filePath":"docker/Docker笔记.md"}'),m={name:"docker/Docker笔记.md"},k=l('<h1 id="docker" tabindex="-1">Docker <a class="header-anchor" href="#docker" aria-label="Permalink to &quot;Docker&quot;">​</a></h1><h2 id="docker-概念" tabindex="-1">Docker-概念 <a class="header-anchor" href="#docker-概念" aria-label="Permalink to &quot;Docker-概念&quot;">​</a></h2><p><em>Docker是一种容器技术，解决软件跨环境迁移的问题</em></p><ul><li>Docker是一个开源的应用容器引擎</li><li>Docker可以让开发者打包他们的应用以及依赖包到一个轻量级，可移植的容器中，然后发布到任何流行的Linux机器上</li><li>容器是完全沙箱机制，相互隔离</li><li>容器性能开销极低</li></ul><details class="details custom-block"><summary>目录</summary><nav class="table-of-contents"><ul><li><a href="#docker-概念">Docker-概念</a></li><li><a href="#docker-安装">Docker-安装</a></li><li><a href="#docker-架构">Docker-架构</a></li><li><a href="#配置docker镜像加速器">配置Docker镜像加速器</a></li><li><a href="#docker-命令">Docker-命令</a><ul><li><a href="#docker服务相关命令">Docker服务相关命令</a></li><li><a href="#docker镜像相关命令">Docker镜像相关命令</a></li><li><a href="#docker容器相关命令">Docker容器相关命令</a></li></ul></li><li><a href="#docker容器数据卷">Docker容器数据卷</a><ul><li><a href="#数据卷的概念">数据卷的概念</a></li><li><a href="#数据卷的作用">数据卷的作用</a></li><li><a href="#配置数据卷">配置数据卷</a></li><li><a href="#数据卷容器">数据卷容器</a></li></ul></li><li><a href="#docker应用部署">Docker应用部署</a><ul><li><a href="#mysql部署">MySQL部署</a></li><li><a href="#tomcat部署">Tomcat部署</a></li><li><a href="#nginx部署">Nginx部署</a></li><li><a href="#redis部署">Redis部署</a></li></ul></li><li><a href="#dockerfile">Dockerfile</a><ul><li><a href="#docker镜像原理">Docker镜像原理</a></li><li><a href="#docker镜像制作">Docker镜像制作</a></li><li><a href="#dockerfile概念及其作用">Dockerfile概念及其作用</a></li><li><a href="#dockerfile关键字">Dockerfile关键字</a></li><li><a href="#案例">案例</a></li></ul></li><li><a href="#docker-服务编排">Docker 服务编排</a><ul><li><a href="#docker-compose">Docker Compose</a></li><li><a href="#安装docker-compose">安装Docker Compose</a></li><li><a href="#卸载docker-compose">卸载Docker Compose</a></li><li><a href="#使用docker-compose-编排nginx-springboot项目">使用Docker Compose 编排nginx+springboot项目</a></li></ul></li><li><a href="#docker-私有仓库">Docker 私有仓库</a><ul><li><a href="#搭建私有仓库">搭建私有仓库</a></li><li><a href="#上传镜像到私有仓库">上传镜像到私有仓库</a></li><li><a href="#从私有仓库中拉取镜像">从私有仓库中拉取镜像</a></li><li><a href="#相同">相同</a></li><li><a href="#不同">不同</a></li></ul></li></ul></nav></details><h2 id="docker-安装" tabindex="-1">Docker-安装 <a class="header-anchor" href="#docker-安装" aria-label="Permalink to &quot;Docker-安装&quot;">​</a></h2><p>Docker可以运行在MAC、Windows、Centos等操作系统上</p><ul><li>yum包更新到最新</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">update</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">yum</span><span style="color:#24292E;"> </span><span style="color:#032F62;">update</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>安装需要的软件包，yum-util提供yum-config-manage功能，另外两个是devicemapper驱动依赖</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-y</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">yum-utils</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">device-mapper-persistent-data</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">lvm2</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">yum</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-y</span><span style="color:#24292E;"> </span><span style="color:#032F62;">yum-utils</span><span style="color:#24292E;"> </span><span style="color:#032F62;">device-mapper-persistent-data</span><span style="color:#24292E;"> </span><span style="color:#032F62;">lvm2</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>设置yum源</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">yum-config-manager</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--add-repo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://download.docker.com/linux/centos/docker-ce.repo</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">yum-config-manager</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--add-repo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://download.docker.com/linux/centos/docker-ce.repo</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>安装docker，出现输入的界面都按 y</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-y</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker-ce</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">yum</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-y</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker-ce</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>查看docker版本，验证是否实验成功</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-v</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-v</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="docker-架构" tabindex="-1">Docker-架构 <a class="header-anchor" href="#docker-架构" aria-label="Permalink to &quot;Docker-架构&quot;">​</a></h2><p><img src="'+p+'" alt="image-20230825200144469"></p><h2 id="配置docker镜像加速器" tabindex="-1">配置Docker镜像加速器 <a class="header-anchor" href="#配置docker镜像加速器" aria-label="Permalink to &quot;配置Docker镜像加速器&quot;">​</a></h2><p><img src="'+e+'" alt="image-20230825201152933"></p><ul><li>可使用阿里云的镜像加速器地址，每个人的都是不一样的</li></ul><p><img src="'+o+`" alt="image-20231119175243848"></p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mkdir</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/docker</span></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">tee</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/docker/daemon.json</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;&lt;-</span><span style="color:#E1E4E8;">&#39;</span><span style="color:#9ECBFF;">EOF</span><span style="color:#E1E4E8;">&#39;</span></span>
<span class="line"><span style="color:#9ECBFF;">{</span></span>
<span class="line"><span style="color:#9ECBFF;">  &quot;registry-mirrors&quot;: [&quot;你自己的地址&quot;]</span></span>
<span class="line"><span style="color:#9ECBFF;">}</span></span>
<span class="line"><span style="color:#9ECBFF;">EOF</span></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">daemon-reload</span></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">restart</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mkdir</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/docker</span></span>
<span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">tee</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/docker/daemon.json</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;&lt;-</span><span style="color:#24292E;">&#39;</span><span style="color:#032F62;">EOF</span><span style="color:#24292E;">&#39;</span></span>
<span class="line"><span style="color:#032F62;">{</span></span>
<span class="line"><span style="color:#032F62;">  &quot;registry-mirrors&quot;: [&quot;你自己的地址&quot;]</span></span>
<span class="line"><span style="color:#032F62;">}</span></span>
<span class="line"><span style="color:#032F62;">EOF</span></span>
<span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">daemon-reload</span></span>
<span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">restart</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="docker-命令" tabindex="-1">Docker-命令 <a class="header-anchor" href="#docker-命令" aria-label="Permalink to &quot;Docker-命令&quot;">​</a></h2><h3 id="docker服务相关命令" tabindex="-1">Docker服务相关命令 <a class="header-anchor" href="#docker服务相关命令" aria-label="Permalink to &quot;Docker服务相关命令&quot;">​</a></h3><ul><li>启动Docker服务</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">start</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">start</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>停止Docker服务</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">stop</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">stop</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>重启Docker服务</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">restart</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">restart</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>查看Docker服务状态</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>开机启动Docker服务</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">enable</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">enable</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="docker镜像相关命令" tabindex="-1">Docker镜像相关命令 <a class="header-anchor" href="#docker镜像相关命令" aria-label="Permalink to &quot;Docker镜像相关命令&quot;">​</a></h3><ul><li>查看镜像(本地)</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">images</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">images</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-q</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 查看所有镜像id</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">images</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">images</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-q</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># 查看所有镜像id</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>搜索镜像(以redis举例)</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">search</span><span style="color:#E1E4E8;"> [镜像名称]</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">search</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">redis</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">search</span><span style="color:#24292E;"> [镜像名称]</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">search</span><span style="color:#24292E;"> </span><span style="color:#032F62;">redis</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>拉取镜像(版本号不写默认拉去最新版本)</li></ul><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">docker pull [镜像名称]:[版本号]</span></span>
<span class="line"><span style="color:#e1e4e8;">docker pull redis:5.0</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">docker pull [镜像名称]:[版本号]</span></span>
<span class="line"><span style="color:#24292e;">docker pull redis:5.0</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><p>删除镜像(本地,通过镜像id删除)</p><p>image id在查看镜像的时候会有</p></li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rmi</span><span style="color:#E1E4E8;"> [image </span><span style="color:#9ECBFF;">id]</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rmi</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">7614</span><span style="color:#9ECBFF;">ae9453d1</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rmi</span><span style="color:#24292E;"> [image </span><span style="color:#032F62;">id]</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rmi</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">7614</span><span style="color:#032F62;">ae9453d1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>删除镜像(本地,通过名称+版本删除)</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rmi</span><span style="color:#E1E4E8;"> [名称:版本号]</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rmi</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">redis:5.0</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rmi</span><span style="color:#24292E;"> [名称:版本号]</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rmi</span><span style="color:#24292E;"> </span><span style="color:#032F62;">redis:5.0</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>删除所有镜像</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rmi</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;docker image -q&#39;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rmi</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;docker image -q&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="docker容器相关命令" tabindex="-1">Docker容器相关命令 <a class="header-anchor" href="#docker容器相关命令" aria-label="Permalink to &quot;Docker容器相关命令&quot;">​</a></h3><blockquote><p>查看容器</p></blockquote><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 查看正在运行的容器</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ps</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#6A737D;"># 查看所有容器</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ps</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-a</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 查看正在运行的容器</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ps</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6A737D;"># 查看所有容器</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ps</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-a</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>创建容器<br> ​ 参数说明:</p></blockquote><ul><li>-i：保持容器运行，通常与[-t]同时使用。加入it两个参数后，容器创建后自动进入容器中，退出容器后，容器自动关闭</li><li>-t：为容器重新分配一个伪输入终端，通常与-i同时使用</li><li>-d：以守护（后台）模式运行容器。创建一个容器在后台运行，需要使用[docker exec] 进入容器。退出后，容器不会关闭。</li><li>--name：为创建的容器命名</li></ul><p><mark>-it：创建的容器一般称为交互式容器，-id创建的容器一般称为守护式容器</mark></p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">run</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-t</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--name=[容器名称]</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">centos:7</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/bin/bash</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">run</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-t</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--name=[容器名称]</span><span style="color:#24292E;"> </span><span style="color:#032F62;">centos:7</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/bin/bash</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>进入容器</p></blockquote><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 在守护式容器中使用 -it 退出时容器仍然在后台运行</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">exec</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">参数</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 退出容器，容器不会关闭</span></span>
<span class="line"><span style="color:#6A737D;"># 示例:</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">exec</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-it</span><span style="color:#E1E4E8;"> [容器名称] /bin/bash</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 在守护式容器中使用 -it 退出时容器仍然在后台运行</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">exec</span><span style="color:#24292E;"> </span><span style="color:#032F62;">参数</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># 退出容器，容器不会关闭</span></span>
<span class="line"><span style="color:#6A737D;"># 示例:</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">exec</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-it</span><span style="color:#24292E;"> [容器名称] /bin/bash</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>启动容器</p></blockquote><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">start</span><span style="color:#E1E4E8;"> [容器名称]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">start</span><span style="color:#24292E;"> [容器名称]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>停止容器</p></blockquote><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">stop</span><span style="color:#E1E4E8;"> [容器名称]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">stop</span><span style="color:#24292E;"> [容器名称]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>删除容器</p><p><mark>注意：开启的容器无法被删除,需要停止容器才能删除</mark></p></blockquote><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 两种删除方式，以容器id或者名称删除</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rm</span><span style="color:#E1E4E8;"> [容器id]</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rm</span><span style="color:#E1E4E8;"> [容器名称]</span></span>
<span class="line"><span style="color:#6A737D;"># 删除所有容器</span></span>
<span class="line"><span style="color:#6A737D;"># 注意这里的符号是 [\`]</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">\`</span><span style="color:#B392F0;">docker</span><span style="color:#9ECBFF;"> ps </span><span style="color:#79B8FF;">-aq</span><span style="color:#9ECBFF;">\`</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 两种删除方式，以容器id或者名称删除</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rm</span><span style="color:#24292E;"> [容器id]</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rm</span><span style="color:#24292E;"> [容器名称]</span></span>
<span class="line"><span style="color:#6A737D;"># 删除所有容器</span></span>
<span class="line"><span style="color:#6A737D;"># 注意这里的符号是 [\`]</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">\`</span><span style="color:#6F42C1;">docker</span><span style="color:#032F62;"> ps </span><span style="color:#005CC5;">-aq</span><span style="color:#032F62;">\`</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>查看容器信息</p></blockquote><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">insepct</span><span style="color:#E1E4E8;"> [容器名称]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">insepct</span><span style="color:#24292E;"> [容器名称]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="docker容器数据卷" tabindex="-1">Docker容器数据卷 <a class="header-anchor" href="#docker容器数据卷" aria-label="Permalink to &quot;Docker容器数据卷&quot;">​</a></h2><h3 id="数据卷的概念" tabindex="-1">数据卷的概念 <a class="header-anchor" href="#数据卷的概念" aria-label="Permalink to &quot;数据卷的概念&quot;">​</a></h3><ul><li>数据卷是宿主机中的一个目录或者文件</li><li>当容器牡蛎和数据卷目录绑定后，对方的修改会立刻同步</li><li>一个数据卷可以被多个容器同时挂载</li><li>一个容器也可以被挂在多个数据卷</li></ul><h3 id="数据卷的作用" tabindex="-1">数据卷的作用 <a class="header-anchor" href="#数据卷的作用" aria-label="Permalink to &quot;数据卷的作用&quot;">​</a></h3><ul><li>容器数据持久化</li><li>外部机器和容器间接通信</li><li>容器之间数据交换</li></ul><p><img src="`+c+`" alt="image-20230825211739925"></p><h3 id="配置数据卷" tabindex="-1">配置数据卷 <a class="header-anchor" href="#配置数据卷" aria-label="Permalink to &quot;配置数据卷&quot;">​</a></h3><blockquote><p>创建启动容器时，使用-v参数设置数据卷</p><p>注意事项：</p></blockquote><ul><li><mark>目录必须是绝对路径</mark></li><li>如果目录不存在，会自动创建</li><li>可以挂载多个数据卷</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">run</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">...</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-v</span><span style="color:#E1E4E8;"> [宿主机目录(文件)]:[容器内目录(文件)] ...</span></span>
<span class="line"><span style="color:#6A737D;"># 示例，此为创建了一个名为c1的交互式容器，并且容器的data_container与宿主机的data互通</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">run</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-it</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--name=c1</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-v</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/root/data:/root/data_container</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">centos:7</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">run</span><span style="color:#24292E;"> </span><span style="color:#032F62;">...</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-v</span><span style="color:#24292E;"> [宿主机目录(文件)]:[容器内目录(文件)] ...</span></span>
<span class="line"><span style="color:#6A737D;"># 示例，此为创建了一个名为c1的交互式容器，并且容器的data_container与宿主机的data互通</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">run</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-it</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--name=c1</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-v</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/root/data:/root/data_container</span><span style="color:#24292E;"> </span><span style="color:#032F62;">centos:7</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="数据卷容器" tabindex="-1">数据卷容器 <a class="header-anchor" href="#数据卷容器" aria-label="Permalink to &quot;数据卷容器&quot;">​</a></h3><blockquote><p><em>配置数据卷容器</em></p></blockquote><ul><li>创建启动数据卷容器，使用<mark>[-v]</mark>参数 设置数据卷</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">run</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-it</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--name=c3</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-v</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/volume</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">centos:7</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">run</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-it</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--name=c3</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-v</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/volume</span><span style="color:#24292E;"> </span><span style="color:#032F62;">centos:7</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>创建启动c1，c2容器，使用<mark>[--volumes-from]</mark>参数 设置数据卷</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">run</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-it</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--name=c1</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--volumes-from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">c3</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">centos:7</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">run</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-it</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--name=c2</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--volumes-from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">c3</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">centos:7</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">run</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-it</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--name=c1</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--volumes-from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">c3</span><span style="color:#24292E;"> </span><span style="color:#032F62;">centos:7</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">run</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-it</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--name=c2</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--volumes-from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">c3</span><span style="color:#24292E;"> </span><span style="color:#032F62;">centos:7</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="docker应用部署" tabindex="-1">Docker应用部署 <a class="header-anchor" href="#docker应用部署" aria-label="Permalink to &quot;Docker应用部署&quot;">​</a></h2><blockquote><p>Mysql部署</p></blockquote><h3 id="mysql部署" tabindex="-1">MySQL部署 <a class="header-anchor" href="#mysql部署" aria-label="Permalink to &quot;MySQL部署&quot;">​</a></h3><p><img src="`+r+`" alt="image-20230825223114926"></p><ul><li>搜索mysql镜像</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">search</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mysql</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">search</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mysql</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>拉取mysql镜像</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mysql:[版本号]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mysql:[版本号]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>创建容器，设置端口映射，目录映射</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 在/root目录下创建mysql目录用于存储mysql数据信息</span></span>
<span class="line"><span style="color:#B392F0;">mkdir</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">~/mysql</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">~/mysql</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 在/root目录下创建mysql目录用于存储mysql数据信息</span></span>
<span class="line"><span style="color:#6F42C1;">mkdir</span><span style="color:#24292E;"> </span><span style="color:#032F62;">~/mysql</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">~/mysql</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">run</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-id</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">-p </span><span style="color:#79B8FF;">3306</span><span style="color:#9ECBFF;">:3306</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">--name=c_mysql </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">-v $PWD</span><span style="color:#9ECBFF;">/conf:/etc/mysql/conf.d</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">-v $PWD</span><span style="color:#9ECBFF;">/logs:/logs</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">-v $PWD</span><span style="color:#9ECBFF;">/data:/var/lib/mysql</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">-e </span><span style="color:#9ECBFF;">MYSQL_ROOT_PASSWORD=</span><span style="color:#79B8FF;">123456</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">mysql:5.6</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">run</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-id</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">-p </span><span style="color:#005CC5;">3306</span><span style="color:#032F62;">:3306</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">--name=c_mysql </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">-v $PWD</span><span style="color:#032F62;">/conf:/etc/mysql/conf.d</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">-v $PWD</span><span style="color:#032F62;">/logs:/logs</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">-v $PWD</span><span style="color:#032F62;">/data:/var/lib/mysql</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">-e </span><span style="color:#032F62;">MYSQL_ROOT_PASSWORD=</span><span style="color:#005CC5;">123456</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">mysql:5.6</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>参数说明</p><ul><li><strong>-p 3307:3306:</strong> 将容器的3306端口映射到宿主机的3307端口</li><li><strong>-v $PWD/conf:/etc/mysql/conf.d:</strong> 将主机当前目录下的conf/my.cnf挂载到容器的/etc/mysql/my.cnf配置目录</li><li><strong>-v $PWD/logs:/logs:</strong> 将主机当前目录下的logs目录挂载到容器的/logs日志目录</li><li>**-v $PWD/data:/var/lib/mysql:**将主机当前目录下的data目录挂载到容器的/var/lib/mysql数据目录</li><li><strong>-e MYSQL_ROOT_PASSWORD=123456:</strong> 初始u啊root用户的密码</li></ul><blockquote><p>Tomcat部署</p></blockquote><h3 id="tomcat部署" tabindex="-1">Tomcat部署 <a class="header-anchor" href="#tomcat部署" aria-label="Permalink to &quot;Tomcat部署&quot;">​</a></h3><ul><li>搜索tomcat镜像</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">search</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">tomcat</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">search</span><span style="color:#24292E;"> </span><span style="color:#032F62;">tomcat</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>拉取tomcat镜像</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">tomcat</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span><span style="color:#24292E;"> </span><span style="color:#032F62;">tomcat</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>创建容器</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 在/root目录下创建tomcat目录用于存储tomcat数据信息</span></span>
<span class="line"><span style="color:#B392F0;">mkdir</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">~/tomcat</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">~/tomcat</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 在/root目录下创建tomcat目录用于存储tomcat数据信息</span></span>
<span class="line"><span style="color:#6F42C1;">mkdir</span><span style="color:#24292E;"> </span><span style="color:#032F62;">~/tomcat</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">~/tomcat</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">run</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-id</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--name=c_tomcat</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">-p </span><span style="color:#79B8FF;">8080</span><span style="color:#9ECBFF;">:8080</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">-v $PWD</span><span style="color:#9ECBFF;">:/usr/local/tomcat/webapps</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">tomcat</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">run</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-id</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--name=c_tomcat</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">-p </span><span style="color:#005CC5;">8080</span><span style="color:#032F62;">:8080</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">-v $PWD</span><span style="color:#032F62;">:/usr/local/tomcat/webapps</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">tomcat</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>参数说明</p><ul><li><p><strong>-p 8080:8080:</strong> 将容器的8080端口映射到主机的8080端口</p></li><li><p><strong>-p $PWD:/usr/local/tomcat/webapps:</strong> 将主机中当前目录挂载到容器的webapps</p></li><li><p>部署项目</p></li><li><p>测试访问</p></li></ul><blockquote><p>Nginx部署</p></blockquote><h3 id="nginx部署" tabindex="-1">Nginx部署 <a class="header-anchor" href="#nginx部署" aria-label="Permalink to &quot;Nginx部署&quot;">​</a></h3><ul><li>搜索Nginx镜像</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">search</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">search</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>拉取Nginx镜像</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>创建容器，设置端口映射，目录映射</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 在/root目录下创建nginx目录用于存储nginx数据信息</span></span>
<span class="line"><span style="color:#B392F0;">mkdir</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">~/nginx</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">~/nginx</span></span>
<span class="line"><span style="color:#B392F0;">mkdir</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">conf</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">conf</span></span>
<span class="line"><span style="color:#6A737D;"># 在~/nginx/conf/下创建nginx.conf文件,并粘贴以下内容</span></span>
<span class="line"><span style="color:#B392F0;">vim</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx.conf</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 在/root目录下创建nginx目录用于存储nginx数据信息</span></span>
<span class="line"><span style="color:#6F42C1;">mkdir</span><span style="color:#24292E;"> </span><span style="color:#032F62;">~/nginx</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">~/nginx</span></span>
<span class="line"><span style="color:#6F42C1;">mkdir</span><span style="color:#24292E;"> </span><span style="color:#032F62;">conf</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">conf</span></span>
<span class="line"><span style="color:#6A737D;"># 在~/nginx/conf/下创建nginx.conf文件,并粘贴以下内容</span></span>
<span class="line"><span style="color:#6F42C1;">vim</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx.conf</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>创建容器，设置端口映射，目录映射</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 简化操作，一条命令执行完毕</span></span>
<span class="line"><span style="color:#B392F0;">mkdir</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">~/nginx</span><span style="color:#E1E4E8;"> &amp;&amp; </span><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">~/nginx</span><span style="color:#E1E4E8;"> &amp;&amp; </span><span style="color:#B392F0;">mkdir</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">conf</span><span style="color:#E1E4E8;"> &amp;&amp; </span><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">conf</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 简化操作，一条命令执行完毕</span></span>
<span class="line"><span style="color:#6F42C1;">mkdir</span><span style="color:#24292E;"> </span><span style="color:#032F62;">~/nginx</span><span style="color:#24292E;"> &amp;&amp; </span><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">~/nginx</span><span style="color:#24292E;"> &amp;&amp; </span><span style="color:#6F42C1;">mkdir</span><span style="color:#24292E;"> </span><span style="color:#032F62;">conf</span><span style="color:#24292E;"> &amp;&amp; </span><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">conf</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-nginx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># nginx配置文件，暂无，按照自己需求写</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># nginx配置文件，暂无，按照自己需求写</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">run</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-id</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--name=c_nginx</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">-p </span><span style="color:#79B8FF;">80</span><span style="color:#9ECBFF;">:80</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">-v $PWD</span><span style="color:#9ECBFF;">/conf/nginx.conf:/etc/nginx/nginx.conf</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">-v $PWD</span><span style="color:#9ECBFF;">/logs:/var/log/nginx</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">-v $PWD</span><span style="color:#9ECBFF;">/html:/usr/share/nginx/html</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">nginx:latest</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">run</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-id</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--name=c_nginx</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">-p </span><span style="color:#005CC5;">80</span><span style="color:#032F62;">:80</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">-v $PWD</span><span style="color:#032F62;">/conf/nginx.conf:/etc/nginx/nginx.conf</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">-v $PWD</span><span style="color:#032F62;">/logs:/var/log/nginx</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">-v $PWD</span><span style="color:#032F62;">/html:/usr/share/nginx/html</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">nginx:latest</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>参数说明:</p><ul><li><p><strong>-p 80:80:</strong> 将容器的80端口映射到宿主机的80端口</p></li><li><p><strong>-v $PWD/conf/nginx.conf:/etc/nginx/nginx.conf:</strong> 将主机当前目录下的/conf/nginx.conf挂载到容器的:/etc/nginx/nginx.conf 配置目录</p></li><li><p><strong>-v $PWD/html:/usr/share/nginx/html:</strong> 将主机当前目录下的logs目录挂载到容器的/var/log/nginx 日志目录</p></li><li><p>使用外部机器访问nginx</p></li></ul><blockquote><p>Redis部署</p></blockquote><h3 id="redis部署" tabindex="-1">Redis部署 <a class="header-anchor" href="#redis部署" aria-label="Permalink to &quot;Redis部署&quot;">​</a></h3><ul><li>搜索Redis镜像</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">search</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">redis</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">search</span><span style="color:#24292E;"> </span><span style="color:#032F62;">redis</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>拉取Redis镜像</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">redis</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span><span style="color:#24292E;"> </span><span style="color:#032F62;">redis</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>创建容器，设置端口映射</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">run</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-id</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--name=c_redis</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">-p </span><span style="color:#79B8FF;">6379</span><span style="color:#9ECBFF;">:6379</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">redis:5.0</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">run</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-id</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--name=c_redis</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">-p </span><span style="color:#005CC5;">6379</span><span style="color:#032F62;">:6379</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">redis:5.0</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>使用外部机器连接redis</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">./redis-cli.exe</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span><span style="color:#E1E4E8;"> [ip] -p 6379</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">./redis-cli.exe</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-h</span><span style="color:#24292E;"> [ip] -p 6379</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="dockerfile" tabindex="-1">Dockerfile <a class="header-anchor" href="#dockerfile" aria-label="Permalink to &quot;Dockerfile&quot;">​</a></h2><p>Docker镜像原理</p><blockquote><p>Docker镜像的本质是什么？</p></blockquote><ul><li>是一个分层的文件系统</li></ul><blockquote><p>Docker中的一个centos镜像为什么只有200mb，而一个centos操作系统的iso文件要几个G？</p></blockquote><ul><li>Centos的iso镜像文件包含bootfs和rootfs，而docker的centos镜像服用操作系统的bootfs，只有rootfs和其它镜像层</li></ul><blockquote><p>Docker中一个tomcat镜像为什么有500mb，而一个tomcat安装包只有70多mb呢？</p></blockquote><ul><li>由于docker中镜像是分层的，tomcat虽然只有70多mb，但他需要依赖于父镜像和基础镜像，所以整个对外暴露的tomcat镜像大小500多mb</li></ul><h3 id="docker镜像原理" tabindex="-1">Docker镜像原理 <a class="header-anchor" href="#docker镜像原理" aria-label="Permalink to &quot;Docker镜像原理&quot;">​</a></h3><p><img src="`+t+'" alt="image-20230825234452741"></p><ul><li>操作系统组成部分:</li></ul><p><img src="'+i+'" alt="image-20230825234848182"></p><p><img src="'+d+`" alt="image-20230825235720592"></p><blockquote><p>Docker镜像制作</p></blockquote><h3 id="docker镜像制作" tabindex="-1">Docker镜像制作 <a class="header-anchor" href="#docker镜像制作" aria-label="Permalink to &quot;Docker镜像制作&quot;">​</a></h3><ul><li>容器转为镜像（此种无法保存挂载文件）</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 转为/创建新的镜像</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">commit</span><span style="color:#E1E4E8;"> [容器id] [镜像名称]:[版本号]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 转为/创建新的镜像</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">commit</span><span style="color:#24292E;"> [容器id] [镜像名称]:[版本号]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 由于镜像无法传输，所以需要保存为压缩文件进行传输</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">save</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-o</span><span style="color:#E1E4E8;"> [压缩文件名称] [镜像名称]:[版本号]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 由于镜像无法传输，所以需要保存为压缩文件进行传输</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">save</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-o</span><span style="color:#24292E;"> [压缩文件名称] [镜像名称]:[版本号]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 将压缩文件还原成镜像</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">load</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> [压缩文件名称]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 将压缩文件还原成镜像</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">load</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> [压缩文件名称]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="`+y+'" alt="image-20230826001119375"></p><blockquote><p>Dockerfile概念及作用</p></blockquote><ul><li>Dockerfile是一个文本文件</li><li>包含了一条条指令</li><li>每一条指令构建一层，基于基础镜像，最终构建出一个新的镜像</li><li>对于开发人员：可以为开发团队提供一个完全一致的开发环境</li><li>对于测试人员：可以直接哪开发时所构建的镜像或者通过Dockerfile文件构建一个新的镜像开始工作</li><li>对于运维人员：在部署时，可以实现应用的无缝移植</li></ul><h3 id="dockerfile概念及其作用" tabindex="-1">Dockerfile概念及其作用 <a class="header-anchor" href="#dockerfile概念及其作用" aria-label="Permalink to &quot;Dockerfile概念及其作用&quot;">​</a></h3><p><img src="'+E+`" alt="image-20230826093349339"></p><blockquote><p>Dockerfile 关键字</p></blockquote><h3 id="dockerfile关键字" tabindex="-1">Dockerfile关键字 <a class="header-anchor" href="#dockerfile关键字" aria-label="Permalink to &quot;Dockerfile关键字&quot;">​</a></h3><table><thead><tr><th>关键字</th><th>作用</th><th>备注</th></tr></thead><tbody><tr><td>FROM</td><td>指定父镜像</td><td>指定dockerfile基于哪个image构建</td></tr><tr><td>MAINTAINER</td><td>作者信息</td><td>用来标明这个dockerfile谁写的</td></tr><tr><td>LABEL</td><td>标签</td><td>用来标明dockerfile的标签 可以使用Lable代替Maintainer 最终都是在docker image基本信息中可以查看</td></tr><tr><td>RUN</td><td>执行命令</td><td>执行一段命令 默认是/bin/bash，格式：RUN command 或者 RUN [&quot;command&quot;,&quot;param1&quot;,&quot;param2&quot;]</td></tr><tr><td>CMD</td><td>容器启动命令</td><td>提供启动容器时的默认命令和ENTRYPOINT配合使用，格式CMD command param1 param2 或者CMD [&quot;command&quot;,&quot;param1&quot;,&quot;param2&quot;]</td></tr><tr><td>ENTRYPOINT</td><td>入口</td><td>一般在制作一些执行就关闭的容器中会使用</td></tr><tr><td>COPY</td><td>复制文件</td><td>build的时候复制文件到image中</td></tr><tr><td>ADD</td><td>添加文件</td><td>build的时候添加文件到image中 不仅仅局限于当前build上下文，可以来源于远程服务</td></tr><tr><td>ENV</td><td>环境变量</td><td>指定build时候的环境变量 可以在启动的容器的时候 通过<mark>[-e]</mark>覆盖 格式ENV name=value</td></tr><tr><td>ARG</td><td>构建参数</td><td>构建参数 只在构建的时候使用的参数 如果有ENV 那么ENV的相同名字啊的值始终覆盖arg的参数</td></tr><tr><td>VOLUME</td><td>定义外部可以挂载的数据卷</td><td>指定build的image那些目录可以启动的时候挂载到文件系统中 启动容器的时候使用<mark>[-v]</mark>绑定 格式 VOLUME [&quot;目录&quot;]</td></tr><tr><td>EXPOSE</td><td>暴露端口</td><td>定义容器运行的时候监听的端口 启动容器的使用<mark>[-p]</mark>来绑定暴露端口。格式：EXPOSE 8080 或者 EXPOSE 8080/udp</td></tr><tr><td>WOEKDIR</td><td>工作目录</td><td>指定容器内部的工作目录如果没有创建则自动创建，如果指定/使用的是绝对地址如果不是/开头那么是在上一条workdir的路径的相对路径</td></tr><tr><td>USER</td><td>指定执行用户</td><td>指定build或者启动的时候用户在RUN CMD ENTRYPONT执行的时候的用户</td></tr><tr><td>HEALTHCHECK</td><td>健康检查</td><td>指定监测当前容器的健康监测的命令基本上没用因为很多时候应用本身有健康监测机制</td></tr><tr><td>ONBUILD</td><td>触发器</td><td>当存在ONBUILD关键字的镜像作为基础镜像的时候当执行FROM完成之后会执行ONBUILD的命令但是不影响当前镜像用处也不怎么大</td></tr><tr><td>STOPSIGNAL</td><td>发送信号量到宿主机</td><td>该STOPSIGNAL指令设置将发送到容器的系统调用信号以退出。</td></tr><tr><td>SHELL</td><td>指定执行脚本的shell</td><td>指定RUN CMD ENTRYPOINT执行命令的时候使用的shell</td></tr></tbody></table><blockquote><p>Dockerfile案例</p><p>需求:</p></blockquote><p>自定义centos7镜像.要求:</p><ul><li>默认登录路径为/usr</li><li>可以使用vim</li></ul><div class="language-dockerfile vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">dockerfile</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 名为centos-dockerfile文件的内容</span></span>
<span class="line"><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> centos:7</span></span>
<span class="line"><span style="color:#F97583;">MAINTAINER</span><span style="color:#E1E4E8;"> xixi&lt;xixi@itxixi.cn&gt;</span></span>
<span class="line"><span style="color:#F97583;">RUN</span><span style="color:#E1E4E8;"> yum install -y vim</span></span>
<span class="line"><span style="color:#F97583;">WORKDIR</span><span style="color:#E1E4E8;"> /usr</span></span>
<span class="line"><span style="color:#F97583;">CMD</span><span style="color:#E1E4E8;"> /bin/bash</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 名为centos-dockerfile文件的内容</span></span>
<span class="line"><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> centos:7</span></span>
<span class="line"><span style="color:#D73A49;">MAINTAINER</span><span style="color:#24292E;"> xixi&lt;xixi@itxixi.cn&gt;</span></span>
<span class="line"><span style="color:#D73A49;">RUN</span><span style="color:#24292E;"> yum install -y vim</span></span>
<span class="line"><span style="color:#D73A49;">WORKDIR</span><span style="color:#24292E;"> /usr</span></span>
<span class="line"><span style="color:#D73A49;">CMD</span><span style="color:#24292E;"> /bin/bash</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>参数解释</p></blockquote><ul><li><mark>-f</mark> 指定指定需要构建的dockerfile的路径</li><li><mark>-t</mark> 设置新的镜像名称以及版本</li><li><mark> . </mark> 代表一个路径,将来寻址的路径</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 框架</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">build</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> [指定需要构建的dockerfile的路径] -t [镜像名称]:[镜像版本] </span><span style="color:#79B8FF;">.</span></span>
<span class="line"><span style="color:#6A737D;"># 示例</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">build</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">./centos-dockerfile</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-t</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xixi-centos:1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">.</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 框架</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">build</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> [指定需要构建的dockerfile的路径] -t [镜像名称]:[镜像版本] </span><span style="color:#005CC5;">.</span></span>
<span class="line"><span style="color:#6A737D;"># 示例</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">build</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">./centos-dockerfile</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-t</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xixi-centos:1</span><span style="color:#24292E;"> </span><span style="color:#032F62;">.</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>案例</p><p>定义dockerfile，发布springboot项目</p><p>基于jdk17构建</p></blockquote><h3 id="案例" tabindex="-1">案例 <a class="header-anchor" href="#案例" aria-label="Permalink to &quot;案例&quot;">​</a></h3><div class="language-dockerfile vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">dockerfile</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 定义父镜像</span></span>
<span class="line"><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> openjdk:17</span></span>
<span class="line"><span style="color:#6A737D;"># 定义作者信息</span></span>
<span class="line"><span style="color:#F97583;">MAINTAINER</span><span style="color:#E1E4E8;"> xixi &lt;xixi@itxixi.com&gt;</span></span>
<span class="line"><span style="color:#6A737D;"># 将jar包添加到容器，这里的app.jar是将前方的jar在添加时重命名为app.jar，方便后续启动</span></span>
<span class="line"><span style="color:#F97583;">ADD</span><span style="color:#E1E4E8;"> reggie_take_out-1.0-SNAPSHOT.jar app.jar</span></span>
<span class="line"><span style="color:#6A737D;"># 定义容器启动执行的命令</span></span>
<span class="line"><span style="color:#F97583;">CMD</span><span style="color:#E1E4E8;"> java -jar app.jar</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 定义父镜像</span></span>
<span class="line"><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> openjdk:17</span></span>
<span class="line"><span style="color:#6A737D;"># 定义作者信息</span></span>
<span class="line"><span style="color:#D73A49;">MAINTAINER</span><span style="color:#24292E;"> xixi &lt;xixi@itxixi.com&gt;</span></span>
<span class="line"><span style="color:#6A737D;"># 将jar包添加到容器，这里的app.jar是将前方的jar在添加时重命名为app.jar，方便后续启动</span></span>
<span class="line"><span style="color:#D73A49;">ADD</span><span style="color:#24292E;"> reggie_take_out-1.0-SNAPSHOT.jar app.jar</span></span>
<span class="line"><span style="color:#6A737D;"># 定义容器启动执行的命令</span></span>
<span class="line"><span style="color:#D73A49;">CMD</span><span style="color:#24292E;"> java -jar app.jar</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 构建镜像</span></span>
<span class="line"><span style="color:#6A737D;"># 指定端口映射</span></span>
<span class="line"><span style="color:#6A737D;"># 不手动添加名字系统会自动生成一个</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">run</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-id</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">9000</span><span style="color:#9ECBFF;">:8080</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xixi-centos:1.0</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 构建镜像</span></span>
<span class="line"><span style="color:#6A737D;"># 指定端口映射</span></span>
<span class="line"><span style="color:#6A737D;"># 不手动添加名字系统会自动生成一个</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">run</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-id</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">9000</span><span style="color:#032F62;">:8080</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xixi-centos:1.0</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="docker-服务编排" tabindex="-1">Docker 服务编排 <a class="header-anchor" href="#docker-服务编排" aria-label="Permalink to &quot;Docker 服务编排&quot;">​</a></h2><p><em>微服务架构的应用系统中一般包含若干个微服务，每个微服务一般都会部署多个实例，如果每个微服务都要手动启停，维护的工作量会很大</em></p><blockquote><p><b>服务编排:</b>按照一定的业务规则批量管理容器</p></blockquote><h3 id="docker-compose" tabindex="-1">Docker Compose <a class="header-anchor" href="#docker-compose" aria-label="Permalink to &quot;Docker Compose&quot;">​</a></h3><blockquote><p>Docker Compose 是一个编排多容器分布式部署的工具，提供命令集管理容器化应用的完整开发周期，包括服务构建，启动和停止。</p></blockquote><p>使用步骤：</p><ul><li>利用Dockerfile定义运行环境镜像</li><li>使用docker-compose.yml 定义组成应用的各服务</li><li>运行docker-compose up 启动应用</li></ul><h3 id="安装docker-compose" tabindex="-1">安装Docker Compose <a class="header-anchor" href="#安装docker-compose" aria-label="Permalink to &quot;安装Docker Compose&quot;">​</a></h3><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># Compose目前已经完全支持Linux、Mac OS、Windows，在我们安装Compose之前，我们需要先安装Docker。下面，我们以编译好的二进制包方式安装在Linux系统中.</span></span>
<span class="line"><span style="color:#B392F0;">curl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-L</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://github.com/docker/compose/releases/download/1.22.0/docker-compose-\`</span><span style="color:#B392F0;">uname</span><span style="color:#9ECBFF;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#9ECBFF;">\`</span><span style="color:#B392F0;">-</span><span style="color:#9ECBFF;">\`</span><span style="color:#B392F0;">uname</span><span style="color:#9ECBFF;"> </span><span style="color:#79B8FF;">-m</span><span style="color:#9ECBFF;">\`</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">-o</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/local/bin/docker-compose</span></span>
<span class="line"><span style="color:#6A737D;"># 设置文件可执行权限</span></span>
<span class="line"><span style="color:#B392F0;">chmod</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+x</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/local/bin/docker-compose</span></span>
<span class="line"><span style="color:#6A737D;"># 查看版本信息</span></span>
<span class="line"><span style="color:#B392F0;">docker-compose</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-version</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># Compose目前已经完全支持Linux、Mac OS、Windows，在我们安装Compose之前，我们需要先安装Docker。下面，我们以编译好的二进制包方式安装在Linux系统中.</span></span>
<span class="line"><span style="color:#6F42C1;">curl</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-L</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://github.com/docker/compose/releases/download/1.22.0/docker-compose-\`</span><span style="color:#6F42C1;">uname</span><span style="color:#032F62;"> </span><span style="color:#005CC5;">-s</span><span style="color:#032F62;">\`</span><span style="color:#6F42C1;">-</span><span style="color:#032F62;">\`</span><span style="color:#6F42C1;">uname</span><span style="color:#032F62;"> </span><span style="color:#005CC5;">-m</span><span style="color:#032F62;">\`</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">-o</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/usr/local/bin/docker-compose</span></span>
<span class="line"><span style="color:#6A737D;"># 设置文件可执行权限</span></span>
<span class="line"><span style="color:#6F42C1;">chmod</span><span style="color:#24292E;"> </span><span style="color:#032F62;">+x</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/usr/local/bin/docker-compose</span></span>
<span class="line"><span style="color:#6A737D;"># 查看版本信息</span></span>
<span class="line"><span style="color:#6F42C1;">docker-compose</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-version</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="卸载docker-compose" tabindex="-1">卸载Docker Compose <a class="header-anchor" href="#卸载docker-compose" aria-label="Permalink to &quot;卸载Docker Compose&quot;">​</a></h3><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 二进制包方式安装的，删除二进制文件即可</span></span>
<span class="line"><span style="color:#B392F0;">rm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/local/bin/docker-compose</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 二进制包方式安装的，删除二进制文件即可</span></span>
<span class="line"><span style="color:#6F42C1;">rm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/usr/local/bin/docker-compose</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="使用docker-compose-编排nginx-springboot项目" tabindex="-1">使用Docker Compose 编排nginx+springboot项目 <a class="header-anchor" href="#使用docker-compose-编排nginx-springboot项目" aria-label="Permalink to &quot;使用Docker Compose 编排nginx+springboot项目&quot;">​</a></h3><blockquote><p>1.创建Docker-compose目录</p></blockquote><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">mkdir</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">~/docker-compose</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">~/docker-compse</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">mkdir</span><span style="color:#24292E;"> </span><span style="color:#032F62;">~/docker-compose</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">~/docker-compse</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>2.编写docker-compose.yml文件</p></blockquote><div class="language-yml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#9ECBFF;">version:&#39;3&#39;</span></span>
<span class="line"><span style="color:#85E89D;">services</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#85E89D;">nginx</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">image</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">nginx</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">ports</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">   - </span><span style="color:#9ECBFF;">80:80</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">links</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">   - </span><span style="color:#9ECBFF;">app</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">volumes</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">   - </span><span style="color:#9ECBFF;">./nginx/conf.d:/etc/nginx/conf.d</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#85E89D;">app</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#85E89D;">image</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">app:[有版本号要加上版本号！！！]</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#85E89D;">expose</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">     - </span><span style="color:#9ECBFF;">&quot;8080&quot;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#032F62;">version:&#39;3&#39;</span></span>
<span class="line"><span style="color:#22863A;">services</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#22863A;">nginx</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">image</span><span style="color:#24292E;">: </span><span style="color:#032F62;">nginx</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">ports</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">   - </span><span style="color:#032F62;">80:80</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">links</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">   - </span><span style="color:#032F62;">app</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">volumes</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">   - </span><span style="color:#032F62;">./nginx/conf.d:/etc/nginx/conf.d</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#22863A;">app</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#22863A;">image</span><span style="color:#24292E;">: </span><span style="color:#032F62;">app:[有版本号要加上版本号！！！]</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#22863A;">expose</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">     - </span><span style="color:#032F62;">&quot;8080&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><blockquote><p>3.创建./nginx/conf.d 目录</p></blockquote><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">mkdir</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">./nginx/conf.d</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">mkdir</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#032F62;">./nginx/conf.d</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>4.在./nginx/conf.d 目录下编写conf文件(文件名随意起，但是后缀需为conf)</p></blockquote><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">server</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">{</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">listen</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">80</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">access_log</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">off</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">proxy_pass</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">http://app:8080</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;"> }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">server</span><span style="color:#24292E;"> </span><span style="color:#032F62;">{</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">listen</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">80</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">access_log</span><span style="color:#24292E;"> </span><span style="color:#032F62;">off</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">location</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/</span><span style="color:#24292E;"> </span><span style="color:#032F62;">{</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">proxy_pass</span><span style="color:#24292E;"> </span><span style="color:#032F62;">http://app:8080</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;"> }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>5.在~/docker-compose 目录下使用docker-compose 启动容器</p></blockquote><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker-compose</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">up</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker-compose</span><span style="color:#24292E;"> </span><span style="color:#032F62;">up</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>6.测试访问</p></blockquote><div class="language-http vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">http://ip/...</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">http://ip/...</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="docker-私有仓库" tabindex="-1">Docker 私有仓库 <a class="header-anchor" href="#docker-私有仓库" aria-label="Permalink to &quot;Docker 私有仓库&quot;">​</a></h2><h3 id="搭建私有仓库" tabindex="-1">搭建私有仓库 <a class="header-anchor" href="#搭建私有仓库" aria-label="Permalink to &quot;搭建私有仓库&quot;">​</a></h3><blockquote><p>搭建私有仓库</p></blockquote><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 1、拉取私有仓库镜像</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">registry</span></span>
<span class="line"><span style="color:#6A737D;"># 2、启动私有仓库容器</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">run</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-id</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--name=registry</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5000</span><span style="color:#9ECBFF;">:5000</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">registry</span></span>
<span class="line"><span style="color:#6A737D;"># 3、打开浏览器，输入地址http://私有仓库服务器ip:5000/v2/_catalog,看到{&quot;repositories&quot;:[]} 表示私有仓库搭建成功</span></span>
<span class="line"><span style="color:#6A737D;"># 4、修改daemon.json</span></span>
<span class="line"><span style="color:#B392F0;">vim</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/docker/daemon.json</span></span>
<span class="line"><span style="color:#6A737D;"># 在上述文件中添加一个key，保存退出。此步让docker信任私有仓库地址；注意将私有仓库服务器ip修改为自己私有仓库服务器真实ip</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span><span style="color:#B392F0;">&quot;insecure-registries&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;">[</span><span style="color:#B392F0;">&quot;私有仓库服务器ip:5000&quot;</span><span style="color:#B392F0;">]}</span></span>
<span class="line"><span style="color:#6A737D;"># 5、重启docker服务</span></span>
<span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">restart</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">start</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">registry</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 1、拉取私有仓库镜像</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span><span style="color:#24292E;"> </span><span style="color:#032F62;">registry</span></span>
<span class="line"><span style="color:#6A737D;"># 2、启动私有仓库容器</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">run</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-id</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--name=registry</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">5000</span><span style="color:#032F62;">:5000</span><span style="color:#24292E;"> </span><span style="color:#032F62;">registry</span></span>
<span class="line"><span style="color:#6A737D;"># 3、打开浏览器，输入地址http://私有仓库服务器ip:5000/v2/_catalog,看到{&quot;repositories&quot;:[]} 表示私有仓库搭建成功</span></span>
<span class="line"><span style="color:#6A737D;"># 4、修改daemon.json</span></span>
<span class="line"><span style="color:#6F42C1;">vim</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/docker/daemon.json</span></span>
<span class="line"><span style="color:#6A737D;"># 在上述文件中添加一个key，保存退出。此步让docker信任私有仓库地址；注意将私有仓库服务器ip修改为自己私有仓库服务器真实ip</span></span>
<span class="line"><span style="color:#24292E;">{</span><span style="color:#6F42C1;">&quot;insecure-registries&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;">[</span><span style="color:#6F42C1;">&quot;私有仓库服务器ip:5000&quot;</span><span style="color:#6F42C1;">]}</span></span>
<span class="line"><span style="color:#6A737D;"># 5、重启docker服务</span></span>
<span class="line"><span style="color:#6F42C1;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">restart</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">start</span><span style="color:#24292E;"> </span><span style="color:#032F62;">registry</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="上传镜像到私有仓库" tabindex="-1">上传镜像到私有仓库 <a class="header-anchor" href="#上传镜像到私有仓库" aria-label="Permalink to &quot;上传镜像到私有仓库&quot;">​</a></h3><blockquote><p>上传镜像到私有仓库</p></blockquote><p><em>以centos:7为例</em></p><p><img src="`+u+'" alt="image-20230827122037649"></p><p><img src="'+b+`" alt="image-20230827122055266"></p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 框架</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">tag</span><span style="color:#E1E4E8;"> [镜像名称]:[版本] [ip]:5000/[镜像名称]:[版本]</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">push</span><span style="color:#E1E4E8;"> [ip]:5000/[镜像名称]:[版本]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 1、标记镜像为私有仓库镜像</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">tag</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">centos:7</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">私有仓库服务器ip:5000/centos:7</span></span>
<span class="line"><span style="color:#6A737D;"># 2、上传标记的镜像</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">push</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">私有仓库服务器ip:5000/centos:7</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 框架</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">tag</span><span style="color:#24292E;"> [镜像名称]:[版本] [ip]:5000/[镜像名称]:[版本]</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">push</span><span style="color:#24292E;"> [ip]:5000/[镜像名称]:[版本]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 1、标记镜像为私有仓库镜像</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">tag</span><span style="color:#24292E;"> </span><span style="color:#032F62;">centos:7</span><span style="color:#24292E;"> </span><span style="color:#032F62;">私有仓库服务器ip:5000/centos:7</span></span>
<span class="line"><span style="color:#6A737D;"># 2、上传标记的镜像</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">push</span><span style="color:#24292E;"> </span><span style="color:#032F62;">私有仓库服务器ip:5000/centos:7</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="从私有仓库中拉取镜像" tabindex="-1">从私有仓库中拉取镜像 <a class="header-anchor" href="#从私有仓库中拉取镜像" aria-label="Permalink to &quot;从私有仓库中拉取镜像&quot;">​</a></h3><blockquote><p>从私有仓库中拉取镜像</p></blockquote><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取镜像</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span><span style="color:#E1E4E8;"> [私有仓库服务器ip]:5000/[镜像名称]:[版本号]</span></span>
<span class="line"><span style="color:#6A737D;"># 例</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">192.168</span><span style="color:#9ECBFF;">.88.129:5000/centos:7</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取镜像</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span><span style="color:#24292E;"> [私有仓库服务器ip]:5000/[镜像名称]:[版本号]</span></span>
<span class="line"><span style="color:#6A737D;"># 例</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">192.168</span><span style="color:#032F62;">.88.129:5000/centos:7</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h1 id="docker容器化虚拟-与-传统虚拟机比较" tabindex="-1">Docker容器化虚拟 与 传统虚拟机比较 <a class="header-anchor" href="#docker容器化虚拟-与-传统虚拟机比较" aria-label="Permalink to &quot;Docker容器化虚拟 与 传统虚拟机比较&quot;">​</a></h1><p><em><strong>容器就是将软件打包成标准化单元，以用于开发、交付和部署</strong></em></p><ul><li>容器镜像是轻量的、 可执行的独立软件包，包含软件运行所需的所有内容:代码、运行时环境、系统工具、系统库和设置。</li><li>容器化软件在任何环境中都能够始终如一地运行。</li><li>容器赋予了软件独立性，使其免受外在环境差异的影响，从而有助于减少团队间在相同基础设施上运行不同软件时的冲突。</li></ul><p><img src="`+F+'" alt="image-20230827123655693"></p><p><img src="'+h+'" alt="image-20230827125024857"></p><blockquote><p>相同:</p></blockquote><h3 id="相同" tabindex="-1">相同 <a class="header-anchor" href="#相同" aria-label="Permalink to &quot;相同&quot;">​</a></h3><ul><li>容器和虚拟机具有相似的资源隔离和分配优势</li></ul><blockquote><p>不同：</p></blockquote><h3 id="不同" tabindex="-1">不同 <a class="header-anchor" href="#不同" aria-label="Permalink to &quot;不同&quot;">​</a></h3><ul><li>容器虚拟化的是操作系统， 虚拟机虚拟化的是硬件。</li><li>传统虚拟机可以运行不同的操作系统，容器只能运行同-类型操作系统</li></ul><table><thead><tr><th>特性</th><th>容器</th><th>虚拟机</th></tr></thead><tbody><tr><td>启动</td><td>秒级</td><td>分钟级</td></tr><tr><td>硬盘使用</td><td>一般为MB</td><td>一般为GB</td></tr><tr><td>性能</td><td>接近原生</td><td>弱于</td></tr><tr><td>系统支持量</td><td>单机支持上千个容器</td><td>一般几十个</td></tr></tbody></table>',217),g=[k];function v(C,B,D,f,q,A){return a(),n("div",null,g)}const w=s(m,[["render",v]]);export{P as __pageData,w as default};
