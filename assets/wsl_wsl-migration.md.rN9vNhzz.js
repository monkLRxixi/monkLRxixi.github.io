import{_ as s,o as a,c as e,Q as l}from"./chunks/framework.gI2xCOxE.js";const n="/assets/image-20231119223344755.qMUs_wiz.png",p="/assets/image-20231119223409685.7spiJNKl.png",o="/assets/image-20231119223500656.9OpBfGC5.png",t="/assets/image-20231119223819767.ddOSoIfB.png",r="/assets/image-20231119223928077.UpjknS1j.png",i="/assets/image-20231119224005683.LaMnlgbC.png",c="/assets/image-20231119224116420.lP0CiVlR.png",_=JSON.parse('{"title":"wsl2 子系统迁移","description":"","frontmatter":{},"headers":[],"relativePath":"wsl/wsl-migration.md","filePath":"wsl/wsl-migration.md"}'),d={name:"wsl/wsl-migration.md"},u=l('<h1 id="wsl2-子系统迁移" tabindex="-1">wsl2 子系统迁移 <a class="header-anchor" href="#wsl2-子系统迁移" aria-label="Permalink to &quot;wsl2 子系统迁移&quot;">​</a></h1><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>🍼<a href="https://learn.microsoft.com/zh-cn/windows/wsl/basic-commands" target="_blank" rel="noreferrer">WSL 的基本命令</a></p></div><h2 id="查看当前计算机的wsl子系统" tabindex="-1">查看当前计算机的wsl子系统 <a class="header-anchor" href="#查看当前计算机的wsl子系统" aria-label="Permalink to &quot;查看当前计算机的wsl子系统&quot;">​</a></h2><div class="language-powershell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">wsl </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">l</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">wsl </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">l</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="查看当前计算机正在运行的wsl子系统" tabindex="-1">查看当前计算机正在运行的wsl子系统 <a class="header-anchor" href="#查看当前计算机正在运行的wsl子系统" aria-label="Permalink to &quot;查看当前计算机正在运行的wsl子系统&quot;">​</a></h2><div class="language-powershell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">wsl </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">l </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">v</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">wsl </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">l </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">v</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="终止正在运行的wsl" tabindex="-1">终止正在运行的wsl <a class="header-anchor" href="#终止正在运行的wsl" aria-label="Permalink to &quot;终止正在运行的wsl&quot;">​</a></h2><div class="language-powershell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">wsl </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">shutdown Ubuntu</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">wsl </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">shutdown Ubuntu</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>再次查看是否终止成功</p><div class="language-powershell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">wsl </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">l </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">v</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">wsl </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">l </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">v</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="在其他盘创建目录用来存放新wsl" tabindex="-1">在其他盘创建目录用来存放新WSL <a class="header-anchor" href="#在其他盘创建目录用来存放新wsl" aria-label="Permalink to &quot;在其他盘创建目录用来存放新WSL&quot;">​</a></h2><p>我这里存在O盘</p><p><code>O:\\WSL\\Ubuntu</code></p><h2 id="将需要迁移的linux-进行导出" tabindex="-1">将需要迁移的Linux，进行导出 <a class="header-anchor" href="#将需要迁移的linux-进行导出" aria-label="Permalink to &quot;将需要迁移的Linux，进行导出&quot;">​</a></h2><div class="language-powershell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">wsl </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">export Ubuntu O:\\WSL\\Ubuntu\\Ubuntu.tar</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">wsl </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">export Ubuntu O:\\WSL\\Ubuntu\\Ubuntu.tar</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="'+n+'" alt="image-20231119223344755"></p><h2 id="注销原有wsl" tabindex="-1">注销原有wsl <a class="header-anchor" href="#注销原有wsl" aria-label="Permalink to &quot;注销原有wsl&quot;">​</a></h2><div class="language-powershell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">wsl </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">unregister Ubuntu</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">wsl </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">unregister Ubuntu</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="'+p+'" alt="image-20231119223409685"></p><h2 id="将备份文件恢复到指定目录中" tabindex="-1">将备份文件恢复到指定目录中 <a class="header-anchor" href="#将备份文件恢复到指定目录中" aria-label="Permalink to &quot;将备份文件恢复到指定目录中&quot;">​</a></h2><div class="language-powershell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">wsl </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">import Ubuntu O:\\WSL\\Ubuntu O:\\WSL\\Ubuntu\\Ubuntu.tar</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">wsl </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">import Ubuntu O:\\WSL\\Ubuntu O:\\WSL\\Ubuntu\\Ubuntu.tar</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="'+o+'" alt="image-20231119223500656"></p><h2 id="设置默认-linux-发行版" tabindex="-1">设置默认 Linux 发行版 <a class="header-anchor" href="#设置默认-linux-发行版" aria-label="Permalink to &quot;设置默认 Linux 发行版&quot;">​</a></h2><p>查看wsl子系统</p><div class="language-powershell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">wsl </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">l</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">wsl </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">l</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="'+t+`" alt="image-20231119223819767"></p><p>此时在终端直接执行wsl进入的并不是Ubuntu,这里提供设置默认发行版命令</p><p>若要设置 WSL 命令将用于运行的默认 Linux 发行版，请将 <code>&lt;Distribution Name&gt;</code> 替换为你首选的 Linux 发行版的名称。</p><div class="language-powershell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># wsl --set-default &lt;Distribution Name&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">wsl </span><span style="color:#F97583;">--</span><span style="color:#79B8FF;">set-default</span><span style="color:#E1E4E8;"> Ubuntu</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># wsl --set-default &lt;Distribution Name&gt;</span></span>
<span class="line"><span style="color:#24292E;">wsl </span><span style="color:#D73A49;">--</span><span style="color:#005CC5;">set-default</span><span style="color:#24292E;"> Ubuntu</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="`+r+'" alt="image-20231119223928077"></p><h2 id="恢复默认用户" tabindex="-1">恢复默认用户 <a class="header-anchor" href="#恢复默认用户" aria-label="Permalink to &quot;恢复默认用户&quot;">​</a></h2><p>这时候启动WSL，发现好像已经恢复正常了，但是用户变成了root，之前使用过的文件也看不见了。</p><p><img src="'+i+'" alt="image-20231119224005683"></p><p>在CMD中，输入 Linux发行版名称 config --default-user 原本用户名,例如：</p><div class="language-powershell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">Ubuntu config </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">default</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">user xixi</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">Ubuntu config </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">default</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">user xixi</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="'+c+'" alt="image-20231119224116420"></p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>请注意，如果<code>wsl -l</code>得到的版本号类似这种<code>Ubuntu-22.04</code></p><p>那么这里的发行版名称的版本号是纯数字，比如Ubuntu-22.04就是Ubuntu2204</p></div><p>这时候再次打开WSL，你会发现一切都恢复正常了。</p>',38),h=[u];function b(g,m,y,E,v,w){return a(),e("div",null,h)}const f=s(d,[["render",b]]);export{_ as __pageData,f as default};
